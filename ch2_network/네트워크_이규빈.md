# CS스터디 2회차 - 네트워크

날짜: 2025년 1월 9일

# 기초

### 성능 판단기준

- **처리량**: 네트워크에서 시간당 처리되는 트래픽의 양(bps). 트래픽, 대역폭, 네트워크 에러, 하드웨어 스펙 등에 영향 받는다.
- **대역폭**: 네트워크가 지원 가능한 “최대” 데이터 전송속도. 물리적 한계와 관련.
- **RTT**: 요청 전송부터 응답 확인까지 걸리는 패킷 왕복시간. (지연시간 측정의 척도) → **ping** 명령어로 확인.

### 네트워크 토폴로지

노드와 링크의 연결형태. **병목현상** 해결의 중요한 기준이 된다. (트래픽이 몰리는 곳에 회선 추가)

|  | **의미** | **장점** | **단점** |
| --- | --- | --- | --- |
| **Tree** | 계층적 구조 | 확장성이 좋다. | 상위 노드 장애가 하위 노드에 전파된다. |
| **Bus** | 메인 링크에 모든 노드가 연결 | 노드 추가가 쉽고, 노드 장애가 전파되지 않는다. | 메인 링크 장애시 전체 네트워크가 마비되고, Spoofing 위험 |
| **Star** | 중앙 허브에 모든 노드가 연결 | 보통 중앙 허브의 방화벽을 철저하게 해놓으므로, 안정성이 높다. | 중앙 허브 장애시 전체 네트워크가 마비 |
| **Ring** | 노드가 순환형으로 연결 | 노드 수가 많아져도 데이터 손실이 없다. | 한 노드나 링크 장애시 전체 네트워크에 영향 |
| **Mesh** | 모든 노드가 서로 그물망처럼 연결 | 안정성이 높고, 트래픽 분산처리가 가능하다. | 비용이 비싸고, 노드 추가가 어렵다. |

### 성능 분석 명령어

- **ping**: 대상 노드에 패킷을 전송. 패킷 수신상태와 지연시간 확인.
- **netstat**: 네트워크 상태 표시. 서비스 포트가 열려있는지 확인.
- **nslookup**: 도메인 네임에 매핑된 IP 확인.
- **tracert**: 대상 노드까지의 네트워크 경로를 표시해, 어느 구간에서 응답시간이 느려지는지 확인.

### 통신 방식

- **unicast**: 가장 일반적인 **1:1** 통신 (예: HTTP)
- **multicast**: 특정 노드들에만 데이터를 전달. 대역폭 효율성 높음.
- **broadcast**: 연결된 모든 노드에 데이터 전송 (예: ARP). 대역폭 낭비 가능성 있음.

### 분류

- **LAN**: 하나의 IP 주소를 기반으로, 스위치나 허브가 여러 개의 MAC 주소로 구별하는 네트워크.
- **MAN**: 2개 이상 LAN이 라우터나 브리지로 연결된 도시 간의 네트워크.
- **WAN**: 국가 간의 광역 통신망.

<br><br>

# TCP/IP 4계층 모델

네트워크 통신 프로토콜의 집합으로서, 네트워킹 범위에 따라 4개의 추상화 계층으로 나뉜다.

### Application

- **개념**: 사용자와 직접 상호작용하는 계층으로 애플리케이션 서비스를 제공.
- **계층 처리 장치**: L7 스위치(로드 밸런서)가 URL,헤더,캐시,쿠키를 기반으로 HTTP 트래픽 분산 처리.
- **예시:** HTTP, FTP, SMTP, SSH

### Transport

- **개념**: 송수신자를 연결하는 통신 서비스를 제공하는 계층. Application과 Internet 계층을 중계한다.
- **계층 처리 장치**: L4 스위치(로드 밸런서)가 IP,포트를 기반으로 TCP/UDP 트래픽 분산 처리.
- **TCP**: 데이터 신뢰성 및 순서 보장. 가상회선 패킷 교환방식.
- **UDP**: 빠른 전송 속도 지원. 데이터그램 패킷 교환방식.
- **TCP 연결 성립 (3-way handshake)**: SYN → SYN+ACK → ACK으로 ISN과 승인번호를 주고받아 연결 설정. 이로 인해 신뢰성 보장됨.
- **TCP 연결 해제 (4-way handshake)**: FIN과 ACK 세그먼트를 2번씩 주고받아 연결 종료. 클라이언트는 지연패킷을 대비하고 연결 종료 확인을 위해 TIME_WAIT 상태에서 일정 시간 후 연결이 닫힌다.

### Internet(Network)

- **개념**: 데이터 패킷을 지정된 IP 주소로 전송하는 계층.
- **IP**는 주소 지정, **ICMP**는 오류 보고, **ARP**는 주소 변환.
- **계층 처리 장치**: L3 스위치(라우터)로 패킷 라우팅 처리.
- **Router**: 여러 네트워크를 연결 및 구분해주고, 경로를 최적화해서 데이터 전달.
- **Routing Table**: 목적지 IP에 따른 전송 경로 정보를 저장한 리스트.

### Link

- **개념**: LAN으로 0과 1로 이루어진 데이터를 전송하며(Physical**),** 이더넷 프레임으로 데이터의 에러를 검출하고 캡슐화(Data Link) 하는 계층.
- **Data Link 계층 처리 장치**: L2 스위치는 패킷의 MAC 주소를 읽어 스위칭하고, 브리지는 2개의 LAN을 연결.
- **Physical 계층 처리 장치**: NIC, AP가 물리적 신호를 처리.

### 계층 간 데이터 송수신 과정

- **캡슐화/비캡슐화**: 먼저 송신자 쪽에서 하위 계층으로 내려가면서(A→T→I→L) 헤더를 붙여 캡슐화  되고, Link 계층을 통해 수신자 쪽에 도착하면 다시 계층을 올라가며 비캡슐화된다.
- **PDU**: 각 계층의 데이터 단위 (TCP-세그먼트, IP-패킷, Data Link-프레임, Physical-비트).

<br><br>

# IP 주소

### 개념

- **IP 주소**: 네트워크에서 장치 식별을 위한 **“논리적 가상 주소”**. (위치에 따라 변함)
- **MAC 주소**: NIC에 부여된 **“물리적 고유 주소”**. (변하지 않음)
- **ARP**: IP 주소 → MAC 주소 변환 프로토콜.
- **RARP**: MAC 주소 → IP 주소 변환 프로토콜.

### IP 주소 체계

- **IPv4 vs IPv6**: IPv4는 32비트 주소로 제한적이고, IPv6는 128비트로 확장 가능.
- **클래스풀 할당방식 (Classful)**: A~E 클래스 형태로 IP 주소를 분류.
- **클래스리스 (CIDR)**: 서브넷 마스크로 유연한 주소 할당 가능.
- **Subnet Mask**: 네트워크와 호스트를 구분하는 데 사용되는 비트 마스크.
- **NAT**: 공인 IP와 사설 IP 간 변환으로 “가상의 IP”를 부여받아 주소 공간을 절약하는 방법. (IPv4의 한계 극복)

<br><br>

# HTTP

Application 계층에서 사용되는 웹 정보 교환을 위한 통신 프로토콜.

### 버전별 특징 및 장단점

- **HTTP/1.0**: “단일” 요청-응답 모델. 서버에서 파일을 가져올때 RTT가 증가하는 단점이 있어, 이미지 스플리팅, 코드 압축, 이미지 Base64 인코딩으로 해결.
- **HTTP/1.1**: keep-alive 옵션으로 지속적 연결 지원. 다만 HOL blocking이나 헤더가 무거워지는 단점이 있어 HTTP/2가 등장.
- **HTTP/2**: 멀티플렉싱으로 지연시간을 줄이고, 헤더 압축 및 서버 푸시 기능을 지원.
- **HTTP/3**: UDP 기반으로 속도 향상, 지연 시간 감소.

### 상태코드

- **1xx(정보)**: 요청이 수신되고 처리 중임을 알림.
- **2xx(성공)**: 요청이 성공적으로 처리됨.
- **3xx(리다이렉션)**: 요청을 다른 URL로 재전송.
- **4xx(클라이언트 오류)**: 잘못된 요청으로 처리 실패.
- **5xx(서버 오류)**: 서버 내부 문제로 요청 처리 실패.

### 메서드

- **GET vs POST**: GET은 데이터 조회, POST는 데이터 생성/변경.
- **PUT vs PATCH**: PUT은 전체 업데이트, PATCH는 부분 업데이트.

### HTTP 멱등성 (Idempotent)

- **의미**: 동일한 요청을 여러 번 보냈을 때, 서버의 리소스가 “동일한 상태”를 유지해 상태의 일관성을 보장하는 것.
- **HTTP 메서드와 멱등성**: GET, PUT, DELETE는 멱등성 보장, POST, PATCH(값 증감, 배열 요소 추가 등)는 비멱등적.

### REST API

- **개념**: 리소스를 URI로 표현하고 HTTP 메서드로 조작하는 웹 아키텍처 스타일.
- **특징**: Stateless, Cacheable, 클라이언트-서버 구조.
- **URI 규칙**: 리소스를 기반으로 명확히 표현 (예: `/users/{id}`).

<br><br>

# HTTPS

### 개념

- Application 계층과 Transport 계층 사이에 SSL/TLS 계층을 추가해 보안을 강화한 HTTP.
- HTTP/2는 HTTPS 위에서 동작한다.
- 직접 CA에서 인증키를 구매하거나, 서버 앞단에 로드밸런서나 CDN을 추가해 구축 할 수 있다.

### SSL/TLS

- **의미**: 보안 세션을 기반으로 데이터 암호화와 인증을 제공하는 프로토콜.
- **인증**: CA에 공개키를 제출하고 인증서를 발급받아 신뢰성 확보.
- **암호화**: “디피-헬만 키 교환 알고리즘” 사용.
- **해싱**: “SHA-256 알고리즘” 등으로 데이터 무결성 확인.

### SEO

- **의미**: 검색 엔진 최적화를 통해 웹사이트 노출도를 증가시키는 방법.
- **최적화 방법**: HTTPS 적용, 메타태그 활용, 빠른 로딩 속도 제공, 사이트맵 관리.

<br><br>

# 심화

### 웹 브라우저의 캐시

- **Local Storage**: 클라이언트에 영구적으로 데이터 저장.
- **Caching**: 네트워크 요청을 줄이기 위해 데이터 임시 저장.
- **Session Storage**: 세션 종료 시까지 데이터 저장.
- **Cookie**: 사용자 세션과 상태 관리에 사용되는 작은 데이터.

### 로그인 인증방식

- **Session 기반**: 서버에서 세션 ID를 관리, 상태 유지.
- **Token 기반 (JWT)**: 클라이언트에 토큰 발급, 무상태 인증 방식.

### 브라우저 동작 과정

1. **리다이렉트**: 다른 URL로 요청 전달.
2. **캐싱**: 로컬 데이터 재사용으로 로딩 시간 단축.
3. **DNS**: 도메인 이름을 IP 주소로 변환.
4. **IP 라우팅**: 목적지 IP를 기반으로 데이터 경로 결정.
5. **TCP 연결 구축**: 3way handshake로 연결 설정.
6. **콘텐츠 다운로드**: 요청 리소스 수신.
7. **브라우저 렌더링**:
    1. DOM & CSSOM 트리 생성.
    2. 렌더 트리 & 렌더 레이어 생성.
    3. 레이아웃 설정 및 페인트.
    4. 레이어 합성 후 화면 출력.

### CORS

- **Origin**: 요청이 시작된 도메인 정보.
- **SOP**: 동일 출처 정책, 다른 도메인의 요청 제한.
- **CORS 의미**: SOP 한계를 해결하기 위한 허용 정책.
- **CORS 에러 해결방법**: 서버에서 적절한 헤더 설정.

### 대규모 트래픽으로 인한 서버 과부하 해결방법

- **모니터링을 통한 자원 할당**: 서버 상태 실시간 감시 및 자원 최적화.
- **Load Balancer**: 트래픽을 여러 서버에 분산.
- **Circuit Breaker**: 장애 전파 방지 및 서비스 안정성 확보.
- **컨텐츠 관리**: 캐싱 및 CDN 활용으로 트래픽 감소.