# 2주차 네트워크

## 네트워크

- 노드(node)와 링크(link)가 서로 연결되어있으며 리소스를 공유하는 집합

## 좋은 네트워크란?

- 많은 처리량을 처리할 수 있음
- 지연 시간이 짧음
- 장애 빈도가 적음
- 좋은 보안을 갖춤

## 처리량(throughput 쓰루풋)

- 링크 내에서 성공적으로 전달된 데이터의 양
- 얼만큼의 트래픽을 처리했는지 나타냄
- 많은 트래픽을 처리한다 = 많은 처리량을 가진다
- 단위 bps(bit per second)
- 사용자들이 많이 접속할 때마다 커지는 트래픽, 네트워크 장치 간의 대역폭, 네트워크 중간에 발생하는 에러, 장치의 하드웨어 스펙에 영향을 받음

## 대역폭

- 주어진 시간 동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수

## 지연 시간 (latency)

- 요청이 처리되는 시간
- 어떤 메시지가 두 장치 사이를 왕복하는 데 걸린 시간
- A→B 800ms, B→A 900ms ⇒ 지연시간 800 + 900 = 1.7s
- 매체 타입(무선, 유선), 패킷 크기, 라우터의 패킷 처리 시간에 영향을 받음

## 네트워크 토폴로지(network topology)

- 노드와 링크가 어떻게 배치되어 있는지에 대한 방식, 연결 형태

### 트리(tree) 토폴로지 = 계층형 토폴로지

- 트리 형태로 배치한 네트워크 구성
- 장점 : 노드의 추가, 삭제가 쉽다.
- 단점 : 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 끼칠 수 있다.

### 버스(bus) 토폴로지

- 중앙 통신 회선 하나에 여러 개의 노드가 연결되어 공유하는 네트워크 구성
- 근거리 통신망(LAN)에서 사용한다.
- 장점 : 설치비용이 적고 신뢰성이 우수하다. 노드를 추가하거나 삭제하기 쉽다.
- 단점 : 스푸핑이 가능한 문제점이 있다.

### 스푸핑

- LAN 상에 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서 특정 노드에 해당 패킷이 오도록 처리하는 것
- 송신 → 수신 ⇒ 송신 → 악의적인 노드 → 수신 (악의적인 노드 끼워넣기)

### 스타(star, 성형) 토폴로지

- 중앙에 있는 노드에 모두 연결된 네트워크 구성
- 장점 : 노드 추가, 에러 탐지가 쉽다. 패킷 충돌 발생 가능성이 적다. 어떤 노드에 장애가 발생해도 쉽게 에러를 발견할 수 있고, 장애 노드가 중앙 노드가 아니면 다른 노드에 영향을 끼치는 것이 적다.
- 단점 : 중앙 노드에 장애가 발생하면 전체 네트워크를 사용할 수 없다. 설치 비용이 높다.

### 링(ring)형 토폴로지

- 각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리처럼 하나의 연속된 길을 통해 통신을 하는 네트워크 구성 방식
- 데이터는 노드에서 노드로 이동, 각각의 토드는 고리 모양의 길을 통해 패킷을 처리한다.
- 장점 : 노드 수가 증가되어도 네트워크 상의 손실이 거의 없고 충돌이 발생되는 가능성이 적다. 노드의 고장 발견이 쉽다.
- 단점 : 네트워크 구성 변경이 어렵다. 회선에 장애가 발생하면 전체 네트워크에 영향을 끼친다.

### 메시(mesh, 망형) 토폴로지

- 그물망처럼 연결되어 있는 네트워크 구조
- 장점 : 한 단말 장치에 장애가 발생해도 여러 개의 경로가 존재하여 네트워크를 계속 사용할 수 있다. 트래픽 분산 처리가 가능하다.
- 단점 : 노드의 추가가 어렵다. 구축 비용과 운용 비용이 높다.

## 병목 현상(bottleneck)

- 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상
- 토폴로지가 중요한 이유 → 병목 현상 찾을 때 중요한 기준이 됨

# 네트워크 분류

## LAN(Local Area Network)

- 근거리 통신망, 같은 건물 같은 좁은 공간
- 전송 속도가 빠르고 혼잡하지 않음

## MAN(Metropolitan Area Network)

- 대도시 지역 네트워크, 도시 같은 넓은 지역에서 운영
- 전송 속도 평균, LAN 보다 더 많이 혼잡

## WAN(Wide Area Network)

- 광역 네트워크, 국가 또는 대륙 같은 더 넓은 지역에서 운영
- 전송 속도 평균, MAN 보다 더 혼잡

## 네트워크 병목 현상의 주된 원인

- 네트워크 대역폭
- 네트워크 토폴로지
- 서버 CPU, 메모리 사용량
- 비효율적인 네트워크 구성

# 네트워크 성능 분석 명령어

## ping (Packet INternet Grouper)

- 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어
- 해당 노드의 패킷 수신 상태, 도달 시간 등을 알 수 있어 해당 노드까지 네트워크가 잘 연결되어 있는지 확인 가능
- TCP/IP 프로토콜 중 ICMP 프로토콜을 통해 동작함 → ICMP 프로토콜 지원하지 않는 기기, 정책상 ICMP 나 traceroute 차단하는 대상은 ping 테스팅 불가
- `ping [IP 주소 또는 도메인 주소](-n 패킷개수)`
- → -n 옵션 : 패킷개수 개의 패킷을 보내서 테스트한다.

## netstat

- 접속되어 있는 서비스들의 네트워크 상태를 표시하는 명령어
- 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여줌
- 주로 서비스의 포트가 열려있는지 확인할 때 사용
- `netstat`

## nslookup

- DNS 관련된 내용 확인하는 명령어
- 특정 도메인이 매핑된 IP를 확인하기 위해 사용
- `nslookup`

## tracert

- 목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어
- 목적지 노드까지 구간들 중 어느 구간에서 응답 시간이 느려지는지 등을 확인할 수 있음
- window : `tracert [도메인]`
- linux : `traceroute [도메인]`

# 네트워크 프로토콜 표준화

- 네트워크 프로토콜이란?
  - 다른 장치들끼리 데이터 주고받기 위해 설정된 공통된 인터페이스
  - IEEE, IETF 표준화 단체가 정함
  - IEEE802.3 : 유선 LAN 프로토콜, 유선으로 LAN을 구축할 때 쓰이는 프로토콜
  - HTTP : 웹을 접속할 때 쓰이며, 서로 약속된 인터페이스를 통해 노드들은 웹 서비스를 기반으로 데이터를 주고받을 수 있음

# TCP/IP 4계층 모델

- 네트워크에서 사용되는 통신 프로토콜의 집합
- 계층들은 프로토콜의 네트워킹 범위에 따라 4개의 추상화 계층으로 구성
- 계층들은 특정 계층이 변경되었을 때 다른 계층이 영향을 받지 않도록 설계됨
- 애플리케이션 계층
  - FTP/HTTP/SSH/SMTP/DNS
- 전송 계층
  - TCP/UDP/QUIC
- 인터넷 계층
  - IP/ARP/ICMP
- 링크 계층
  - 이더넷

## 애플리케이션(application) 계층

- FTP, HTTP, SSH, SMTP, DNS 등 응용 프로그램이 사용되는 프로토콜 계층
- 웹 서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 층

### FTP

- 장치와 장치 간의 파일을 전송하는 데 사용되는 표준 통신 프로토콜

### SSH

- 보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜

### SMTP

- 전자 메일 전송을 위한 인터넷 표준 통신 프로토콜

### HTTP

- World Wide Web을 위한 데이터 통신의 기초이자 웹 사이트를 이용하는 데 쓰는 프로토콜

### DNS

- 도메인 이름과 IP 주소를 매핑해주는 서버
- IP 주소가 바뀌어도 사용자들에게 똑같은 도메인 주소로 서비스할 수 있다.

## 전송(transport) 계층

- 송신자와 수신자를 연결하는 통신 서비스 제공
- 연결 지향 데이터 스트림 지원
- 신뢰성
- 흐름 제어 제공
- 애플리케이션 ↔ 인터넷 계층 사이의 데이터가 전달될 때 중계 역할 수행
- TCP / UDP

### TCP

- 패킷 사이의 순서 보장
- 연결지향 프로토콜 사용
- 신뢰성 구축(연결 성립 과정)
- 수신 여부 확인
- **가상회선 패킷 교환 방식** 사용
- 장점 : 데이터 손실 없이 정확한 전송
- 단점 : 속도가 느리고 오버헤드가 큼
- 연결 성립 과정
  - 3-way handshake 작업 진행
  - 클라이언트와 서버가 통신할 때 3단계 과정
  1. SYN 단계
  2. SYN + ACK 단계
  3. ACK 단계
  - 3-way handshake 과정 이후 신뢰성 구축되고 데이터 전송 시작 ⇒ 이 과정이 있기 때문에 신뢰성이 있는 계층이라고 함
  - SYN : 연결 요청 플래그
  - ACK : 응답 플래그
  - ISN : Initial Sequence Numbers 초기 네트워크 연결할 때 할당된 32비트 고유 시퀀스 번호
- 연결 해제 과정
  - 4-way handshake 과정 발생
  1. 클라이언트가 연결 닫으려고 할 때 FIN 세그먼트 전송
  2. 서버는 ACK 승인 세그먼트 전송
  3. 서버는 ACK 보내고 일정 시간 이후에 FIN 세그먼트 전송
  4. 클라이언트는 TIME_WAIT 상태가 되고 다시 서버로 ACK 보내서 서버는 CLOSED 상태가 된다. 이후 클라이언트는 어느 정도의 시간을 대기한 후 연결이 닫히고 클라이언트와 서버의 모든 자원의 연결이 해제된다.
  - 왜 일정 시간 뒤에 닫을까?
    1. 지연 패킷이 발생할 경우를 대비하기 위함(지연 패킷을 처리하지 못하면 데이터 무결성 문제가 발생함 = 데이터 무결성 문제를 방지하기 위함)
    2. 두 장치가 연결이 닫혔는지 확인하기 위함
  - TIME_WAIT : 소켓이 바로 소멸되지 않고 일정 시간 유지되는 상태를 말하며 지연 패킷 등의 문제점을 해결하는 데 쓰인다.(우분투 60초, 윈도우 4분으로 설정, OS마다 조금씩 다를 수 있다)
  - 데이터 무결성 : data integrity 데이터의 정확성과 일관성을 유지하고 보증하는 것

### UDP

- 순서 보장하지 않음
- 수신 여부 확인하지 않음
- 단순히 데이터만 주는 **데이터 그램 패킷 교환 방식** 사용
- 장점 : 낮은 오버헤드와 빠른 속도
- 단점 : 데이터 손실과 순서 보장이 없음

### 가상회선 패킷 교환 방식

- 각 패킷에 가상회선 식별자가 포함됨
- 모든 패킷을 전송하면 가상회선이 해제됨
- **패킷들은 전송된 순서대로 도착**하는 방식

### 데이터그램 패킷 교환 방식

- 패킷이 독립적으로 이동하며 최적의 경로를 선택하여 전송
- 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있음
- **도착한 순서가 다를 수 있는** 방식

# OSI 7계층

- 애플리케이션 계층
- 프레젠테이션 계층
- 세션 계층
- 전송 계층
- 네트워크 계층
- 데이터 링크 계층
- 물리 계층

## Q. OSI 7계층에 대해서 설명해주세요

![image.png](/필기사진_윤주/image.png)

- 7 계층(응용 계층) : 사용자에게 통신을 위한 서비스 제공. 인터페이스 역할
- 6 계층(표현 계층) : 데이터의 형식(Format)을 정의하는 계층 (코드 간의 번역을 담당)
- 5 계층(세션 계층) : 컴퓨터끼리 통신을 하기 위해 세션을 만드는 계층
- 4 계층(전송 계층) : 최종 수신 프로세스로 데이터의 전송을 담당하는 계층 (단위 :Segment) (ex. TCP, UDP)
- 3 계층(네트워크 계층) : 패킷을 목적지까지 가장 빠른 길로 전송하기 위한 계층 (단위 :Packet) (ex. Router)
- 2 계층(데이터링크 계층) : 데이터의 물리적인 전송과 에러 검출, 흐름 제어를 담당하는 계층 (단위 :frame) (ex. 이더넷)
- 1 계층(물리 계층) : 데이터를 전기 신호로 바꾸어주는 계층 (단위 :bit) (장비: 케이블,리피터,허브)

## Q. [www.naver.com](http://www.naver.com) 에 접속할 때 생기는 과정에 대해서 설명하세요. (웹 동작 방식 이해)

![image.png](/필기사진_윤주/image%201.png)

1. 사용자가 브라우저에 URL([www.naver.com](http://www.naver.com/))을 입력
2. DNS 서버에 도메인 네임으로 서버의 진짜 주소를 찾음
3. IP 주소로 웹 서버에 TCP 3 handshake로 연결 수립
4. 클라이언트는 웹 서버로 HTTP 요청 메시지를 보냄
5. 웹 서버는 HTTP 응답 메시지를 보냄
6. 도착한 HTTP 응답 메세지는 웹 페이지 데이터로 변환되고, 웹 브라우저에 의해 출력

## Q. GET과 POST의 차이에 대해 설명해주세요.

- GET은 데이터를 조회하기 위해 사용되는 방식으로 데이터를 헤더에 추가하여 전송하는 방식입니다.URL에 데이터가 노출되므로 보안적으로 중요한 데이터를 포함해서는 안됩니다.
- POST는 데이터를 추가 또는 수정하기 위해 사용되는 방식으로 데이터를 바디에 추가하여 전송하는 방식입니다.완전히 안전하다는 것은 아니지만 URL에 데이터가 노출되지 않아 GET 보다는 안전합니다.

| 처리방식               | GET 방식                                                | POST 방식                      |
| ---------------------- | ------------------------------------------------------- | ------------------------------ |
| URL에 데이터 노출 여부 | O                                                       | X                              |
| URL 예시               | http://localhost:8080/boardList?name=제목&contents=내용 | http://localhost:8080/addBoard |
| 이터의 위치            | Header(헤더)                                            | Body(바디)                     |
| 캐싱 가능 여부         | O                                                       | X                              |
| 멱등성 여부            | O                                                       | X                              |

## Q. HTTP Method와 각각이 사용되는 경우에 대해서 설명해주세요.

- HTTP 메소드는 클라이언트가 서버에게 사용자 요청의 목적을 알리는 '수단'입니다.
-
- 종류기능GET데이터 조회POST요청 데이터 처리(보통 데이터 등록 사용)PUT데이터 변경 (해당 데이터가 없으면 생성)PATCH일부 데이터만 변경DELETE데이터 삭제

| 종류   | 기능                                    | 멱등성                                                                                                        |
| ------ | --------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| GET    | 데이터 조회                             | O                                                                                                             |
| POST   | 요청 데이터 처리(보통 데이터 등록 사용) | X → 같은 요청을 N번 호출하면 새로운 리소스가 생성되거나 리소스의 상태가 달라지면서 호출 결과가 달라질 수 있음 |
| PUT    | 데이터 변경 (해당 데이터가 없으면 생성) | O → 같은 요청을 N번 호출해도 항상 대상 리소스를 대체하여 동일한 상태로 만듬                                   |
| PATCH  | 일부 데이터만 변경                      | X → 기존 리소스에 응답을 추가(append) 하는 경우에도 PATCH가 사용될 수 있으며, 이때 호출 결과가 달라질 수 있음 |
| DELETE | 데이터 삭제                             | O                                                                                                             |

## Q. HTTP와 HTTPS의 차이점은 무엇인가요?

- HTTP는 평문 데이터를 전송하는 프로토콜이기 때문에, HTTP로 중요한 정보를 주고 받으면 제 3자에 의해 조회될 수 있습니다.
- 이러한 문제를 해결하기 위해 HTTP에 암호화가 추가된 프로토콜이 HTTPS입니다.
- HTTPS는 SSL의 껍질을 덮어쓴 HTTP라고 할 수 있습니다.
- ※ SSL(Secure Socket Layer) 인터넷을 통해 전달되는 정보를 보호하기 위해 개발한 통신 규약
- HTTP는 원래 TCP와 직접 통신했지만, HTTPS에서 HTTP는 SSL과 통신하고 SSL이 TCP와 통신함으로써 암호화와 증명서, 안전성 보호를 이용할 수 있게 됩니다.

## Q. HTTP 프로토콜에 대해 설명해주세요.

- HTTP(Hyper Text Transfer Protocol)이란 데이터를 주고 받기 위한 프로토콜이며, 서버/클라이언트 모델을 따릅니다.
- HTTP는 상태 정보를 저장하지 않는 Stateless의 특징과 클라이언트의 요청에 맞는 응답을 보낸 후 연결을 끊는 Connectionless의 특징을 가지고 있습니다.
- 장점
  - 통신간의 연결 상태 처리나 상태 정보를 관리할 필요가 없어 서버 디자인이 간단하다.
  - 각각의 HTTP 요청에 독립적으로 응답만 보내주면 OK
- 단점
  - 이전 통신의 정보를 모르기 때문에 매번 인증을 해줘야 한다.
  - 이를 해결하기 위해 쿠키(cookie)나 세션(session)을 사용해서 데이터를 처리한다.

## 참고

https://dev-coco.tistory.com/161

https://velog.io/@leemember/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EA%B8%B0%EC%88%A0-%EB%A9%B4%EC%A0%91-%EB%8B%A8%EA%B3%A8-%EA%B0%9C%EB%85%90%EB%93%A4-%EC%A0%95%EB%A6%AC-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-CS-%ED%8E%B8-%EA%B7%B8-%EC%99%B8-%EC%A7%88%EB%AC%B8
